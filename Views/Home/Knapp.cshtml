@inject Microsoft.AspNetCore.Mvc.Localization.IViewLocalizer Localizer
@{
    ViewData["Title"] = Localizer["KnappTitle"];
}

<div id="contenido-oculto" class="container bg-white p-4 rounded shadow-sm" style="max-width: 900px; margin-top: 3rem; display:none;">
    <h2 class="text-center mb-4">@Localizer["KnappWelcome"]</h2>

    <p class="text-start"><span class="emoji">üßî‚Äç‚ôÇÔ∏è</span> @Localizer["KnappMyName"]</p>
    <p class="text-start"><span class="emoji">üë©‚Äçü¶∞</span> @Localizer["KnappWifeInfo"]</p>

    <h5 class="text-start mt-3">@Localizer["KnappIntro"]</h5>
    <p class="text-start">@Localizer["KnappOptimisticMessage"]</p>
    <p class="text-start">@Localizer["KnappStepsNotice"]</p>

    <h2 class="text-center mt-5 mb-4">@Localizer["StepsTitle"]</h2>

    <h4 class="mt-4">üìÖ @Localizer["Day1"]</h4>
    <ul>
        <li>@Localizer["Day1Details"]</li>
    </ul>

    <h4 class="mt-4">üìÖ @Localizer["Day2"]</h4>
    <ul>
        <li>@Localizer["Day2Detail1"]</li>
        <li>@Localizer["Day2Detail2"]</li>
    </ul>

    <h4 class="mt-4">üìÖ @Localizer["Day3"]</h4>
    <ul>
        <li>@Localizer["Day3Detail1"]</li>
        <li>@Localizer["Day3Detail2"]</li>
    </ul>

    <h4 class="mt-4">‚úàÔ∏è @Localizer["TravelQuestion"]</h4>
    <p>@Localizer["TravelAnswer1"]</p>
    <p>@Localizer["TravelAnswer2"]</p>
    <p>@Localizer["TravelAnswer3"]</p>

    <h4 class="mt-4">üìç @Localizer["OfficesTitle"]</h4>
    <ul>
        <li>
            <strong>@Localizer["AddressMeldezettel"]</strong><br/>
            Magistrat der Stadt Graz<br/>
            @Localizer["AddressMeldezettelDetails"]
        </li>
        <li class="mt-3">
            <strong>@Localizer["AddressAufenthaltskarte"]</strong><br/>
            Bezirkshauptmannschaft Graz<br/>
            @Localizer["AddressAufenthaltskarteDetails"]
        </li>
    </ul>

    <h4 class="mt-5">üìö @Localizer["SourcesTitle"]</h4>
    <ul>
        <li><a href="https://www.workinaustria.com/en/residence-employment/right-of-residence-for-eu-eea-nationals-in-austria/" target="_blank" rel="noopener noreferrer">@Localizer["Source1"]</a></li>
        <li><a href="https://www.migration.gv.at/en/types-of-immigration/mobility-within-the-eu/" target="_blank" rel="noopener noreferrer">@Localizer["Source2"]</a></li>
    </ul>

    <div class="footer mt-5">
        @Localizer["KnappConfidentialNote"]
    </div>
</div>

<script>
  (function() {
    const password = 'KNAPP'; // Cambia la contrase√±a aqu√≠
    const contenido = document.getElementById('contenido-oculto');
    const key = 'knapp_access_granted';

    function mostrarContenido() {
      contenido.style.display = 'block';
    }

    function pedirContrasena() {
      let attempts = 0;
      const maxAttempts = 3;
      while (attempts < maxAttempts) {
        const input = prompt('@Localizer["PromptPassword"]');
        if (input === null) {
          alert('@Localizer["PromptCancelled"]');
          break;
        }
        if (input === password) {
          localStorage.setItem(key, 'true');
          mostrarContenido();
          return;
        } else {
          attempts++;
          alert(`@Localizer["PromptRetry"] ${maxAttempts - attempts}`);
        }
      }
      if (attempts >= maxAttempts) {
        alert('@Localizer["PromptBlocked"]');
      }
    }

    // Si ya se dio la contrase√±a, mostrar contenido directamente
    if (localStorage.getItem(key) === 'true') {
      mostrarContenido();
    } else {
      pedirContrasena();
    }
  })();
</script>
